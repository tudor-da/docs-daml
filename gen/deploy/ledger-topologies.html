<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Daml Ledger Topologies &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  <script type="text/javascript" src="../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Daml Participant pruning" href="../ops/index.html" />
  <link rel="prev" title="Deploying to a generic Daml ledger" href="generic_ledger.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/authorization.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/index.html">gRPC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/error-codes.html">Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/extractor.html">Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/export/index.html">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-integration-kit/index.html">Daml Integration Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/ledger-api-test-tool/index.html">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Daml Ledger Topologies</a><ul>
<li><a class="reference internal" href="#global-state-topologies">Global State Topologies</a><ul>
<li><a class="reference internal" href="#the-fully-centralized-ledger">The Fully Centralized Ledger</a></li>
<li><a class="reference internal" href="#scaling">Scaling</a></li>
<li><a class="reference internal" href="#replication-availability-and-distributing-trust">Replication: Availability and Distributing Trust</a></li>
<li><a class="reference internal" href="#trusted-execution-environments">Trusted Execution Environments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#partitioned-ledger-topologies">Partitioned Ledger Topologies</a></li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="daml-ledger-topologies">
<span id="id1"></span><h1>Daml Ledger Topologies<a class="headerlink" href="#daml-ledger-topologies" title="Permalink to this headline">¶</a></h1>
<p>The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.</p>
<div align="center" class="align-center"><img alt="../_images/da-ledger-model1.svg" src="../_images/da-ledger-model1.svg" width="80%" /></div>
<p>The real-world topologies of actual ledger implementations differ significantly, however.
The topologies can impact both the functional and non-functional properties of the resulting ledger.
This document provides one useful categorization of the existing implementations’ topologies: the split into global and partial state topologies, depending on whether single <a class="reference internal" href="../concepts/glossary.html#trust-domain"><span class="std std-ref">trust domains</span></a> can see the entire ledger, or just parts of it.
The implementations with topologies from the same category share many non-functional properties and trust assumptions.
Additionally, their <a class="reference internal" href="../concepts/identity-and-package-management.html#identity-package-management"><span class="std std-ref">identity and package management</span></a> functions also behave similarly.</p>
<div class="section" id="global-state-topologies">
<span id="id2"></span><h2>Global State Topologies<a class="headerlink" href="#global-state-topologies" title="Permalink to this headline">¶</a></h2>
<p>In global state topologies, there exists at least one <a class="reference internal" href="../concepts/glossary.html#trust-domain"><span class="std std-ref">trust domain</span></a> whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.</p>
<div class="section" id="the-fully-centralized-ledger">
<span id="fully-centralized-ledger"></span><h3>The Fully Centralized Ledger<a class="headerlink" href="#the-fully-centralized-ledger" title="Permalink to this headline">¶</a></h3>
<p>The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger, whose real-world owner is called the <strong>operator</strong>.</p>
<div align="center" class="align-center"><img alt="../_images/physical-shared-ledger.svg" src="../_images/physical-shared-ledger.svg" width="80%" /></div>
<p>The <a class="reference internal" href="../tools/sandbox.html#sandbox-manual"><span class="std std-ref">Daml Sandbox</span></a> uses this topology.
While simple to deploy and operate, the single-machine setup also has downsides:</p>
<ol class="arabic simple">
<li>it provides no scaling</li>
<li>it is not highly available</li>
<li>the operator is fully trusted with preserving the ledger’s integrity</li>
<li>the operator has full insight into the entire ledger, and is thus fully trusted with privacy</li>
<li>it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.</li>
</ol>
<p>The first four problems can be solved or mitigated as follows:</p>
<ol class="arabic simple">
<li>scaling by splitting the system up into separate functional components and parallelizing execution</li>
<li>availability by replication</li>
<li>trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication, or by maintaining one trust domain but using hardware-based Trusted Execution Environments (TEEs) or other cryptographic means to enforce or audit ledger integrity without having to trust the operator.</li>
<li>trust for privacy through TEEs that restrict data access by hardware means.</li>
</ol>
<p>The remainder of the section discusses these solutions and their implementations in the different Daml ledgers.
The last problem, interoperability, is inherent when the two deployments are operated by different trust domains: by definition, a topology in which no single trust domain would hold the entire ledger is not a global state topology.</p>
</div>
<div class="section" id="scaling">
<span id="scaling-daml-ledgers"></span><h3>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h3>
<p>The main functionalities of a system providing the Ledger API are:</p>
<ol class="arabic simple">
<li>serving the API itself: handling the gRPC connections and authorizing users,</li>
<li>allowing the API users to access their <a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#da-model-projections"><span class="std std-ref">ledger projection</span></a> (reading the ledger), and</li>
<li>allowing the API users to issue commands and thus attempt to append commits to the shared ledger (writing to the ledger).</li>
</ol>
<p>The implementation thus naturally splits up into components for serving the API, reading from the ledger, and writing to the ledger.
Serving the API and reading can be scaled out horizontally.
Reading can be scaled out by building caches of the ledger contents; as the projections are streams, no synchronization between the different caches is necessary.</p>
<p>To ensure ledger integrity, the writing component must preserve the ledger’s <a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#da-model-validity"><span class="std std-ref">validity conditions</span></a>.
Writing can thus be further split up into three sub-components, one for each of the three validity conditions:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#da-model-conformance"><span class="std std-ref">model conformance</span></a> checks (i.e., Daml interpretation),</li>
<li><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#da-model-authorization"><span class="std std-ref">authorization</span></a> checks, and</li>
<li><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#da-model-consistency"><span class="std std-ref">consistency</span></a> checks.</li>
</ol>
<p>Of these three, conformance and authorization checks can be checked in isolation for each commit.
Thus, such checks can be parallelized and scaled out.
The consistency check cannot be done in isolation and requires synchronization.
However, to improve scaling, it can internally still use some form of sharding, together with a commit protocol.</p>
<p>For example, the next versions of Daml on <a class="reference external" href="https://aws.amazon.com/rds/aurora/">Amazon Aurora</a> and on <a class="reference external" href="https://www.hyperledger.org/projects/fabric">Hyperledger Fabric</a> will use such partitioned topologies.
The next image shows an extreme version of this partitioning, where each party is served by a separate system node running all the parallelizable functions.
The writing subsystem is split into two stages.
The first stage checks conformance and authorization, and can be arbitrarily replicated, while the second stage is centralized and checks consistency.</p>
<div align="center" class="align-center"><img alt="../_images/full-partitioning.svg" src="../_images/full-partitioning.svg" /></div>
</div>
<div class="section" id="replication-availability-and-distributing-trust">
<span id="daml-ledger-replication"></span><h3>Replication: Availability and Distributing Trust<a class="headerlink" href="#replication-availability-and-distributing-trust" title="Permalink to this headline">¶</a></h3>
<p>Availability is improved by replication.
The scaling methodology described in the previous section already improves the ledger’s availability properties, as it introduces replication for most functions.
For example, if a node serving a client with the API fails, clients can fail over to other such nodes.
Replicating the writer’s consistency-checking subsystem must use a consensus algorithm to ensure consistency of the replicated system (in particular, the <a class="reference external" href="https://aphyr.com/posts/333-serializability-linearizability-and-locality">linearizability</a> of the virtual shared ledger).</p>
<p>Replication can also help to lower, or more precisely distribute the trust required to ensure the system’s integrity.
Trust can be distributed by introducing multiple organizations, i.e., multiple trust domains into the system.
In these situations, the system typically consists of two types of nodes:</p>
<ol class="arabic simple">
<li><strong>Writer nodes</strong>, which replicate the physical shared ledger and can extend it with new commits.
Writer nodes are thus also referred to as <strong>committer nodes</strong>.</li>
</ol>
<ol class="arabic simple" id="participant-node-def" start="2">
<li><strong>Participant nodes</strong>, (also called Client nodes in some platforms) which serve the Ledger API to a subset of the system parties, which we say are hosted by this participant.
A participant node proposes new commits on behalf of the parties it hosts, and holds a portion of the ledger that is relevant for those parties (i.e., the parties’ <a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#da-model-projections"><span class="std std-ref">ledger projection</span></a>).
The term “participant node” is sometimes also used more generally, for any physical node serving the Ledger API to a party.</li>
</ol>
<p>The participant nodes need not be trusted by the other nodes, or by the committer(s); the participants can be operated by mutually distrusting entities, i.e., belong to different trust domains.
In general, the participant nodes do not necessarily even need to know each other.
However, they have to be known to and accepted by the committer nodes.
The committer nodes are jointly trusted with ensuring the ledger’s integrity.
To distribute the trust, the committer nodes must implement a Byzantine fault tolerant replication mechanism.
For example, the mechanism can ensure that the system preserves integrity even if up to a third of the committer nodes (e.g., 2 out of 7) misbehave in arbitrary ways.
The resulting topology is visualized below.</p>
<div align="center" class="align-center"><img alt="../_images/replicated-committer-topology.svg" id="replicated-committer-topology" src="../_images/replicated-committer-topology.svg" /></div>
<p>Daml on <a class="reference external" href="https://blogs.vmware.com/blockchain">VMware Concord</a> and Daml on <a class="reference external" href="https://sawtooth.hyperledger.org/">Hyperledger Sawtooth</a> are examples of such a replicated setup.</p>
</div>
<div class="section" id="trusted-execution-environments">
<h3>Trusted Execution Environments<a class="headerlink" href="#trusted-execution-environments" title="Permalink to this headline">¶</a></h3>
<p>Integrity and privacy can also be protected using hardware Trusted Execution Environments (TEEs), such as Intel SGX.
The software implementing the ledger can then be deployed inside of TEE <strong>enclaves</strong>, which are code blocks that the processor isolates and protects from the rest of the software stack (even the operating system).
The hardware ensures that the enclave data never leaves the processor unencrypted, offering privacy.
Furthermore, hardware-based attestation can guarantee that the operating entities process data using the prescribed code only, guaranteeing integrity.
The hardware is designed in such a way as to make any potential physical attacks by the operator extremely expensive.
This moves the trust necessary to achieve these properties from the operators of the trust domains that maintain the global state to the hardware manufacturer, who is anyway trusted with correctly producing the hardware.
Recent security research has, however, found scenarios where the TEE protection mechanisms can be compromised.</p>
</div>
</div>
<div class="section" id="partitioned-ledger-topologies">
<span id="partitioned-topologies"></span><h2>Partitioned Ledger Topologies<a class="headerlink" href="#partitioned-ledger-topologies" title="Permalink to this headline">¶</a></h2>
<p>In these topologies, the ledger is implemented as a distributed system.
Unlike the global state topologies, no single trust domain holds a physical copy of the entire shared ledger.
Instead, the participant nodes hold just the part of the ledger (i.e., the <a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html#da-model-projections"><span class="std std-ref">ledger projection</span></a>) that is relevant to the parties to whom they serve the Ledger API.
The participants jointly extend the ledger by running a distributed commit protocol.</p>
<div align="center" class="align-center"><img alt="../_images/decentralized-ledger-topology.svg" src="../_images/decentralized-ledger-topology.svg" /></div>
<p>The implementations might still rely on trusted third parties to facilitate the commit protocol.
The required trust in terms of privacy and integrity, however, can generally be lower than in global state topologies.
Moreover, unlike the previous topologies, they support interoperability: even if two transactions are committed with the help of disjoint sets of trusted third parties, their <a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html#def-output-contract"><span class="std std-ref">output contracts</span></a> can in general still be used within the same atomic transaction.
The exact trust assumptions and the degree of supported interoperability are implementation-dependent.
<a class="reference external" href="http://canton.io">Canton</a> and Daml on <a class="reference external" href="https://www.corda.net">R3 Corda</a> are two such implementations.
The main drawback of this topology is that availability can be influenced by the participant nodes.
In particular, transactions cannot be committed if they use data that is only stored on unresponsive nodes.
Spreading the data among additional trusted entities can mitigate the problem.</p>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="generic_ledger.html" class="da-btn da-btn-label btn-prev" title="Deploying to a generic Daml ledger" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="../ops/index.html" class="da-btn da-btn-label btn-next" title="Daml Participant pruning" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>