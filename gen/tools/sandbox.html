<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Daml Sandbox &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  <script type="text/javascript" src="../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Navigator" href="navigator/index.html" />
  <link rel="prev" title="Daml Studio" href="../daml/daml-studio.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/authorization.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/index.html">gRPC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/grpc/error-codes.html">Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ledger-topologies.html">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extractor.html">Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="export/index.html">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-integration-kit/index.html">Daml Integration Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ledger-api-test-tool/index.html">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Daml Sandbox</a><ul>
<li><a class="reference internal" href="#contract-identifier-generation">Contract Identifier Generation</a></li>
<li><a class="reference internal" href="#running-with-persistence">Running with persistence</a></li>
<li><a class="reference internal" href="#running-with-authentication">Running with authentication</a><ul>
<li><a class="reference internal" href="#token-payload">Token payload</a></li>
<li><a class="reference internal" href="#generating-json-web-tokens-jwt">Generating JSON Web Tokens (JWT)</a></li>
<li><a class="reference internal" href="#generating-rsa-keys">Generating RSA keys</a></li>
<li><a class="reference internal" href="#generating-ec-keys">Generating EC keys</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-with-tls">Running with TLS</a></li>
<li><a class="reference internal" href="#command-line-reference">Command-line reference</a></li>
<li><a class="reference internal" href="#metrics">Metrics</a><ul>
<li><a class="reference internal" href="#enable-and-configure-reporting">Enable and configure reporting</a></li>
<li><a class="reference internal" href="#types-of-metrics">Types of metrics</a><ul>
<li><a class="reference internal" href="#gauge">Gauge</a></li>
<li><a class="reference internal" href="#counter">Counter</a></li>
<li><a class="reference internal" href="#meter">Meter</a></li>
<li><a class="reference internal" href="#histogram">Histogram</a></li>
<li><a class="reference internal" href="#timers">Timers</a></li>
<li><a class="reference internal" href="#database-metrics">Database Metrics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-of-metrics">List of metrics</a><ul>
<li><a class="reference internal" href="#daml-commands-deduplicated-commands"><code class="docutils literal notranslate"><span class="pre">daml.commands.deduplicated_commands</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-delayed-submissions"><code class="docutils literal notranslate"><span class="pre">daml.commands.delayed_submissions</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-failed-command-interpretation"><code class="docutils literal notranslate"><span class="pre">daml.commands.failed_command_interpretation</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-submissions"><code class="docutils literal notranslate"><span class="pre">daml.commands.submissions</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-valid-submissions"><code class="docutils literal notranslate"><span class="pre">daml.commands.valid_submissions</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-validation"><code class="docutils literal notranslate"><span class="pre">daml.commands.validation</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-input-buffer-capacity"><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_capacity</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-input-buffer-length"><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_length</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-input-buffer-delay"><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_delay</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-max-in-flight-capacity"><code class="docutils literal notranslate"><span class="pre">daml.commands.max_in_flight_capacity</span></code></a></li>
<li><a class="reference internal" href="#daml-commands-max-in-flight-length"><code class="docutils literal notranslate"><span class="pre">daml.commands.max_in_flight_length</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-get-lf-package"><code class="docutils literal notranslate"><span class="pre">daml.execution.get_lf_package</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-active-contract-count-per-execution"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract_count_per_execution</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-active-contract-per-execution"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract_per_execution</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-active-contract"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-contract-key-count-per-execution"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key_count_per_execution</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-contract-key-per-execution"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key_per_execution</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-lookup-contract-key"><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-retry"><code class="docutils literal notranslate"><span class="pre">daml.execution.retry</span></code></a></li>
<li><a class="reference internal" href="#daml-execution-total"><code class="docutils literal notranslate"><span class="pre">daml.execution.total</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-connection-sandbox-pool"><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-deduplicate-command"><code class="docutils literal notranslate"><span class="pre">daml.index.db.deduplicate_command</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-active-contracts"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_active_contracts</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-completions"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_completions</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-flat-transactions"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_flat_transactions</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-ledger-end"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_ledger_end</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-ledger-id"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_ledger_id</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-get-transaction-trees"><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_transaction_trees</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-all-parties"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_all_parties</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-archive"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_archive</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-configuration-entries"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_configuration_entries</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-package-entries"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_package_entries</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-packages"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_packages</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-parties"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_parties</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-load-party-entries"><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_party_entries</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-active-contract"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_active_contract</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-configuration"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_configuration</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-contract-by-key"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_contract_by_key</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-flat-transaction-by-id"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_flat_transaction_by_id</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-maximum-ledger-time"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_maximum_ledger_time</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-lookup-transaction-tree-by-id"><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_transaction_tree_by_id</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-remove-expired-deduplication-data"><code class="docutils literal notranslate"><span class="pre">daml.index.db.remove_expired_deduplication_data</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-stop-deduplicating-command"><code class="docutils literal notranslate"><span class="pre">daml.index.db.stop_deduplicating_command</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-store-configuration-entry"><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_configuration_entry</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-store-ledger-entry"><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_ledger_entry</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-store-package-entry"><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_package_entry</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-store-party-entry"><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_party_entry</span></code></a></li>
<li><a class="reference internal" href="#daml-index-db-store-rejection"><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_rejection</span></code></a></li>
<li><a class="reference internal" href="#daml-lapi"><code class="docutils literal notranslate"><span class="pre">daml.lapi</span></code></a></li>
<li><a class="reference internal" href="#jvm"><code class="docutils literal notranslate"><span class="pre">jvm</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="daml-sandbox">
<span id="sandbox-manual"></span><h1>Daml Sandbox<a class="headerlink" href="#daml-sandbox" title="Permalink to this headline">¶</a></h1>
<p>The Daml Sandbox, or Sandbox for short, is a simple ledger implementation that enables rapid application prototyping by simulating a Daml Ledger.</p>
<p>You can start Sandbox together with <a class="reference internal" href="navigator/index.html"><span class="doc">Navigator</span></a> using the <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">start</span></code> command in a Daml project. This command will compile the Daml file and its dependencies as specified in the <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>. It will then launch Sandbox passing the just obtained DAR packages. The script specified in the <code class="docutils literal notranslate"><span class="pre">init-script</span></code> field in <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> will be loaded into the ledger. Finally, it launches the navigator connecting it to the running Sandbox.</p>
<p>It is possible to execute the Sandbox launching step in isolation by typing <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">sandbox</span></code>.</p>
<p>Note: Sandbox has switched to use Wall Clock Time mode by default. To use Static Time Mode you can provide the <code class="docutils literal notranslate"><span class="pre">--static-time</span></code> flag to the <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">sandbox</span></code> command or configure the time mode for <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">start</span></code> in <code class="docutils literal notranslate"><span class="pre">sandbox-options:</span></code> section of <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code>. Please refer to <a class="reference internal" href="assistant.html#daml-yaml-configuration"><span class="std std-ref">Daml configuration files</span></a> for more information.</p>
<p>Sandbox can also be run manually as in this example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ daml sandbox Main.dar --static-time

   ____             ____
  / __/__ ____  ___/ / /  ___ __ __
 _\ \/ _ `/ _ \/ _  / _ \/ _ \\ \ /
/___/\_,_/_//_/\_,_/_.__/\___/_\_\

INFO: Initialized sandbox version 1.12.0-snapshot.20210312.6498.0.707c86aa with ledger-id = fd562651-5ebb-4a45-add7-25809ca1f297, port = 6865, dar file = List(Main.dar), time mode = static time, ledger = in-memory, auth-service = AuthServiceWildcard$, contract ids seeding = strong
</pre></div>
</div>
<div class="section" id="contract-identifier-generation">
<h2>Contract Identifier Generation<a class="headerlink" href="#contract-identifier-generation" title="Permalink to this headline">¶</a></h2>
<p>Sandbox supports two contract identifier generator schemes:</p>
<ul class="simple">
<li>The so-called <em>deterministic</em> scheme that deterministically produces
contract identifiers from the state of the underlying ledger.  Those
identifiers are strings starting with <code class="docutils literal notranslate"><span class="pre">#</span></code>.</li>
<li>The so-called <em>random</em> scheme that produces contract identifiers
indistinguishable from random.  In practice, the schemes use a
cryptographically secure pseudorandom number generator initialized
with a truly random seed. Those identifiers are hexadecimal strings
prefixed by <code class="docutils literal notranslate"><span class="pre">00</span></code>.</li>
</ul>
<p>The sandbox can be configured to use one or the other scheme with one
of the following command line options:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--contract-id-seeding=&lt;seeding-mode&gt;</span></code>.  The Sandbox will use the
seeding mode <cite>&lt;seeding-mode&gt;</cite> to seed the generation of random
contract identifiers. Possible seeding modes are:<ul>
<li><code class="docutils literal notranslate"><span class="pre">no</span></code>: The Sandbox uses the <code class="docutils literal notranslate"><span class="pre">deterministic</span></code> scheme. This is
only supported by Sandbox classic and it prevents Sandbox from
accepting packages in Daml-LF 1.11 or newer.</li>
<li><code class="docutils literal notranslate"><span class="pre">strong</span></code>: The Sandbox uses the <code class="docutils literal notranslate"><span class="pre">random</span></code> scheme initialized
with a high-entropy seed.  Depending on the underlying operating
system, the startup of the Sandbox may block as entropy is being
gathered to generate the seed.</li>
<li><code class="docutils literal notranslate"><span class="pre">testing-weak</span></code>: (<strong>For testing purposes only</strong>) The Sandbox uses
the <code class="docutils literal notranslate"><span class="pre">random</span></code> scheme initialized with a low entropy seed.  This
may be used in a testing environment to avoid exhausting the
system entropy pool when a large number of Sandboxes are started
in a short time interval.</li>
<li><code class="docutils literal notranslate"><span class="pre">testing-static</span></code>: (<strong>For testing purposes only</strong>) The sandbox
uses the <code class="docutils literal notranslate"><span class="pre">random</span></code> scheme with a fixed seed. This may be used in
testing for reproducible runs.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="running-with-persistence">
<h2>Running with persistence<a class="headerlink" href="#running-with-persistence" title="Permalink to this headline">¶</a></h2>
<p>Note: Running Sandbox with persistence is deprecated as of SDK 1.8.0 (16th Dec 2020). You can use the
Daml Driver for PostgreSQL instead.</p>
<p>By default, Sandbox uses an in-memory store, which means it loses its state when stopped or restarted. If you want to keep the state, you can use a Postgres database for persistence. This allows you to shut down Sandbox and start it up later, continuing where it left off.</p>
<p>To set this up, you must:</p>
<ul>
<li><p class="first">create an initially empty Postgres database that the Sandbox application can access</p>
</li>
<li><p class="first">have a database user for Sandbox that has authority to execute DDL operations</p>
<p>This is because Sandbox manages its own database schema, applying migrations if necessary when upgrading versions.</p>
</li>
</ul>
<p>To start Sandbox using persistence, pass an <code class="docutils literal notranslate"><span class="pre">--sql-backend-jdbcurl</span> <span class="pre">&lt;value&gt;</span></code> option, where <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> is a valid jdbc url containing the username, password and database name to connect to.</p>
<p>Here is an example for such a url: <code class="docutils literal notranslate"><span class="pre">jdbc:postgresql://localhost/test?user=fred&amp;password=secret</span></code></p>
<p>Due to possible conflicts between the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> character and various terminal shells, we recommend quoting the jdbc url like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ daml sandbox Main.dar --sql-backend-jdbcurl &quot;jdbc:postgresql://localhost/test?user=fred&amp;password=secret&quot;
</pre></div>
</div>
<p>If you’re not familiar with JDBC URLs, see the JDBC docs for more information: <a class="reference external" href="https://jdbc.postgresql.org/documentation/head/connect.html">https://jdbc.postgresql.org/documentation/head/connect.html</a></p>
</div>
<div class="section" id="running-with-authentication">
<span id="sandbox-authorization"></span><h2>Running with authentication<a class="headerlink" href="#running-with-authentication" title="Permalink to this headline">¶</a></h2>
<p>By default, Sandbox does not use any authentication and accepts all valid ledger API requests.</p>
<p>To start Sandbox with authentication based on <a class="reference external" href="https://jwt.io/">JWT</a> tokens,
use one of the following command line options:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--auth-jwt-rs256-crt=&lt;filename&gt;</span></code>.
The sandbox will expect all tokens to be signed with RS256 (RSA Signature with SHA-256) with the public key loaded from the given X.509 certificate file.
Both PEM-encoded certificates (text files starting with <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">CERTIFICATE-----</span></code>)
and DER-encoded certificates (binary files) are supported.</li>
<li><code class="docutils literal notranslate"><span class="pre">--auth-jwt-es256-crt=&lt;filename&gt;</span></code>.
The sandbox will expect all tokens to be signed with ES256 (ECDSA using P-256 and SHA-256) with the public key loaded from the given X.509 certificate file.
Both PEM-encoded certificates (text files starting with <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">CERTIFICATE-----</span></code>)
and DER-encoded certificates (binary files) are supported.</li>
<li><code class="docutils literal notranslate"><span class="pre">--auth-jwt-es512-crt=&lt;filename&gt;</span></code>.
The sandbox will expect all tokens to be signed with ES512 (ECDSA using P-521 and SHA-512)     with the public key loaded from the given X.509 certificate file.
Both PEM-encoded certificates (text files starting with <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">CERTIFICATE-----</span></code>)
and DER-encoded certificates (binary files) are supported.</li>
<li><code class="docutils literal notranslate"><span class="pre">--auth-jwt-rs256-jwks=&lt;url&gt;</span></code>.
The sandbox will expect all tokens to be signed with RS256 (RSA Signature with SHA-256) with the public key loaded from the given <a class="reference external" href="https://tools.ietf.org/html/rfc7517">JWKS</a> URL.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>For testing purposes only, the following options may also be used.
None of them is considered safe for production:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">--auth-jwt-hs256-unsafe=&lt;secret&gt;</span></code>.
The sandbox will expect all tokens to be signed with HMAC256 with the given plaintext secret.</li>
</ul>
</div>
<div class="section" id="token-payload">
<h3>Token payload<a class="headerlink" href="#token-payload" title="Permalink to this headline">¶</a></h3>
<p>JWTs express claims which are documented in the <a class="reference internal" href="../app-dev/authorization.html#authorization-claims"><span class="std std-ref">authorization</span></a> documentation.</p>
<p>The following is an example of a valid JWT payload:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;https://daml.com/ledger-api&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;ledgerId&quot;</span><span class="p">:</span> <span class="s2">&quot;aaaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee&quot;</span><span class="p">,</span>
     <span class="nt">&quot;participantId&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;applicationId&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;admin&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nt">&quot;actAs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">],</span>
     <span class="nt">&quot;readAs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Bob&quot;</span><span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1300819380</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ledgerId</span></code>, <code class="docutils literal notranslate"><span class="pre">participantId</span></code>, <code class="docutils literal notranslate"><span class="pre">applicationId</span></code> restricts the validity of the token to the given ledger, participant, or application</li>
<li><code class="docutils literal notranslate"><span class="pre">exp</span></code> is the standard JWT expiration date (in seconds since EPOCH)</li>
<li><code class="docutils literal notranslate"><span class="pre">admin</span></code>, <code class="docutils literal notranslate"><span class="pre">actAs</span></code> and <code class="docutils literal notranslate"><span class="pre">readAs</span></code> bear the same meaning as in the <a class="reference internal" href="../app-dev/authorization.html#authorization-claims"><span class="std std-ref">authorization</span></a> documentation</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">public</span></code> claim is implicitly held by anyone bearing a valid JWT (even without being an admin or being able to act or read on behalf of any party).</p>
</div>
<div class="section" id="generating-json-web-tokens-jwt">
<h3>Generating JSON Web Tokens (JWT)<a class="headerlink" href="#generating-json-web-tokens-jwt" title="Permalink to this headline">¶</a></h3>
<p>To generate tokens for testing purposes, use the <a class="reference external" href="https://jwt.io/">jwt.io</a> web site.</p>
</div>
<div class="section" id="generating-rsa-keys">
<h3>Generating RSA keys<a class="headerlink" href="#generating-rsa-keys" title="Permalink to this headline">¶</a></h3>
<p>To generate RSA keys for testing purposes, use the following command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>openssl req -nodes -new -x509 -keyout sandbox.key -out sandbox.crt
</pre></div>
</div>
<p>which generates the following files:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">sandbox.key</span></code>: the private key in PEM/DER/PKCS#1 format</li>
<li><code class="docutils literal notranslate"><span class="pre">sandbox.crt</span></code>: a self-signed certificate containing the public key, in PEM/DER/X.509 Certificate format</li>
</ul>
</div>
<div class="section" id="generating-ec-keys">
<h3>Generating EC keys<a class="headerlink" href="#generating-ec-keys" title="Permalink to this headline">¶</a></h3>
<p>To generate keys to be used with ES256 for testing purposes, use the following command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>openssl req -x509 -nodes -days 3650 -newkey ec:&lt;(openssl ecparam -name prime256v1) -keyout ecdsa256.key -out ecdsa256.crt
</pre></div>
</div>
<p>which generates the following files:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ecdsa256.key</span></code>: the private key in PEM/DER/PKCS#1 format</li>
<li><code class="docutils literal notranslate"><span class="pre">ecdsa256.crt</span></code>: a self-signed certificate containing the public key, in PEM/DER/X.509 Certificate format</li>
</ul>
<p>Similarly, you can use the following command for ES512 keys:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>openssl req -x509 -nodes -days 3650 -newkey ec:&lt;(openssl ecparam -name secp521r1) -keyout ecdsa512.key -out ecdsa512.crt
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-with-tls">
<span id="sandbox-tls"></span><h2>Running with TLS<a class="headerlink" href="#running-with-tls" title="Permalink to this headline">¶</a></h2>
<p>To enable TLS, you need to specify the private key for your server and
the certificate chain via <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">sandbox</span> <span class="pre">--pem</span> <span class="pre">server.pem</span> <span class="pre">--crt</span>
<span class="pre">server.crt</span></code>.  By default, Sandbox requires client authentication as
well. You can set a custom root CA certificate used to validate client
certificates via <code class="docutils literal notranslate"><span class="pre">--cacrt</span> <span class="pre">ca.crt</span></code>. You can change the client
authentication mode via <code class="docutils literal notranslate"><span class="pre">--client-auth</span> <span class="pre">none</span></code> which will disable it
completely, <code class="docutils literal notranslate"><span class="pre">--client-auth</span> <span class="pre">optional</span></code> which makes it optional or
specify the default explicitly via <code class="docutils literal notranslate"><span class="pre">--client-auth</span> <span class="pre">require</span></code>.</p>
</div>
<div class="section" id="command-line-reference">
<h2>Command-line reference<a class="headerlink" href="#command-line-reference" title="Permalink to this headline">¶</a></h2>
<p>To start Sandbox, run: <code class="docutils literal notranslate"><span class="pre">sandbox</span> <span class="pre">[options]</span> <span class="pre">&lt;archive&gt;...</span></code>.</p>
<p>To see all the available options, run <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">sandbox</span> <span class="pre">--help</span></code>.</p>
</div>
<div class="section" id="metrics">
<h2>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enable-and-configure-reporting">
<h3>Enable and configure reporting<a class="headerlink" href="#enable-and-configure-reporting" title="Permalink to this headline">¶</a></h3>
<p>To enable metrics and configure reporting, you can use the two following CLI options:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--metrics-reporter</span></code>: passing a legal value will enable reporting; the accepted values
are <code class="docutils literal notranslate"><span class="pre">console</span></code>, <code class="docutils literal notranslate"><span class="pre">csv:&lt;/path/to/metrics.csv&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">graphite:&lt;local_server_port&gt;</span></code>.<ul>
<li><code class="docutils literal notranslate"><span class="pre">console</span></code>: prints captured metrics on the standard output</li>
<li><code class="docutils literal notranslate"><span class="pre">csv://&lt;/path/to/metrics.csv&gt;</span></code>: saves the captured metrics in CSV format at the specified location</li>
<li><code class="docutils literal notranslate"><span class="pre">graphite://&lt;server_host&gt;[:&lt;server_port&gt;]</span></code>: sends captured metrics to a Graphite server. If the port
is omitted, the default value <code class="docutils literal notranslate"><span class="pre">2003</span></code> will be used.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">--metrics-reporting-interval</span></code>: metrics are pre-aggregated on the sandbox and sent to
the reporter, this option allows the user to set the interval. The formats accepted are based
on the ISO-8601 duration format <code class="docutils literal notranslate"><span class="pre">PnDTnHnMn.nS</span></code> with days considered to be exactly 24 hours.
The default interval is 10 seconds.</li>
</ul>
</div>
<div class="section" id="types-of-metrics">
<h3>Types of metrics<a class="headerlink" href="#types-of-metrics" title="Permalink to this headline">¶</a></h3>
<p>This is a list of type of metrics with all data points recorded for each.
Use this as a reference when reading the list of metrics.</p>
<div class="section" id="gauge">
<h4>Gauge<a class="headerlink" href="#gauge" title="Permalink to this headline">¶</a></h4>
<p>An individual instantaneous measurement.</p>
</div>
<div class="section" id="counter">
<h4>Counter<a class="headerlink" href="#counter" title="Permalink to this headline">¶</a></h4>
<p>Number of occurrences of some event.</p>
</div>
<div class="section" id="meter">
<h4>Meter<a class="headerlink" href="#meter" title="Permalink to this headline">¶</a></h4>
<p>A meter tracks the number of times a given event occurred. The following data
points are kept and reported by any meter.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.count</span></code>: number of registered data points overall</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.m1_rate</span></code>: number of registered data points per minute</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.m5_rate</span></code>: number of registered data points every 5 minutes</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.m15_rate</span></code>: number of registered data points every 15 minutes</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.mean_rate</span></code>: mean number of registered data points</li>
</ul>
</div>
<div class="section" id="histogram">
<h4>Histogram<a class="headerlink" href="#histogram" title="Permalink to this headline">¶</a></h4>
<p>An histogram records aggregated statistics about collections of events.
The exact meaning of the number depends on the metric (e.g. timers
are histograms about the time necessary to complete an operation).</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.mean</span></code>: arithmetic mean</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.stddev</span></code>: standard deviation</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p50</span></code>: median</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p75</span></code>: 75th percentile</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p95</span></code>: 95th percentile</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p98</span></code>: 98th percentile</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p99</span></code>: 99th percentile</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.p999</span></code>: 99.9th percentile</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.min</span></code>: lowest registered value overall</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.max</span></code>: highest registered value overall</li>
</ul>
<p>Histograms only keep a small <em>reservoir</em> of statistically relevant data points
to ensure that metrics collection can be reasonably accurate without being
too taxing resource-wise.</p>
<p>Unless mentioned otherwise all histograms (including timers, mentioned below)
use exponentially decaying reservoirs (i.e. the data is roughly relevant for
the last five minutes of recording) to ensure that recent and possibly
operationally relevant changes are visible through the metrics reporter.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> values are not affected by the reservoir sampling policy.</p>
<p>You can read more about reservoir sampling and possible associated policies
in the <a class="reference external" href="https://metrics.dropwizard.io/4.1.2/manual/core.html#man-core-histograms/">Dropwizard Metrics library documentation</a>.</p>
</div>
<div class="section" id="timers">
<h4>Timers<a class="headerlink" href="#timers" title="Permalink to this headline">¶</a></h4>
<p>A timer records all metrics registered by a meter and by an histogram, where
the histogram records the time necessary to execute a given operation (unless
otherwise specified, the precision is nanoseconds and the unit of measurement
is milliseconds).</p>
</div>
<div class="section" id="database-metrics">
<h4>Database Metrics<a class="headerlink" href="#database-metrics" title="Permalink to this headline">¶</a></h4>
<p>A “database metric” is a collection of simpler metrics that keep track of
relevant numbers when interacting with a persistent relational store.</p>
<p>These metrics are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.wait</span></code> (timer): time to acquire a connection to the database</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.exec</span></code> (timer): time to run the query and read the result</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.query</span></code> (timer): time to run the query</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.commit</span></code> (timer): time to perform the commit</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;metric.qualified.name&gt;.translation</span></code> (timer): if relevant, time necessary to turn serialized Daml-LF values into in-memory objects</li>
</ul>
</div>
</div>
<div class="section" id="list-of-metrics">
<h3>List of metrics<a class="headerlink" href="#list-of-metrics" title="Permalink to this headline">¶</a></h3>
<p>The following is a non-exhaustive list of selected metrics
that can be particularly important to track. Note that not
all the following metrics are available unless you run the
sandbox with a PostgreSQL backend.</p>
<div class="section" id="daml-commands-deduplicated-commands">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.deduplicated_commands</span></code><a class="headerlink" href="#daml-commands-deduplicated-commands" title="Permalink to this headline">¶</a></h4>
<p>A meter. Number of deduplicated commands.</p>
</div>
<div class="section" id="daml-commands-delayed-submissions">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.delayed_submissions</span></code><a class="headerlink" href="#daml-commands-delayed-submissions" title="Permalink to this headline">¶</a></h4>
<p>A meter. Number of delayed submissions (submission who have been
evaluated to transaction with a ledger time farther in
the future than the expected latency).</p>
</div>
<div class="section" id="daml-commands-failed-command-interpretation">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.failed_command_interpretation</span></code><a class="headerlink" href="#daml-commands-failed-command-interpretation" title="Permalink to this headline">¶</a></h4>
<p>A meter. Number of commands that have been deemed unacceptable
by the interpreter and thus rejected (e.g. double spends)</p>
</div>
<div class="section" id="daml-commands-submissions">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.submissions</span></code><a class="headerlink" href="#daml-commands-submissions" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to fully process a submission (validation,
deduplication and interpretation) before it’s handed over
to the ledger to be finalized (either committed or rejected).</p>
</div>
<div class="section" id="daml-commands-valid-submissions">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.valid_submissions</span></code><a class="headerlink" href="#daml-commands-valid-submissions" title="Permalink to this headline">¶</a></h4>
<p>A meter. Number of submission that pass validation and are
further sent to deduplication and interpretation.</p>
</div>
<div class="section" id="daml-commands-validation">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.validation</span></code><a class="headerlink" href="#daml-commands-validation" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to validate submitted commands before they are
fed to the Daml interpreter.</p>
</div>
<div class="section" id="daml-commands-input-buffer-capacity">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_capacity</span></code><a class="headerlink" href="#daml-commands-input-buffer-capacity" title="Permalink to this headline">¶</a></h4>
<p>A counter. The capacity of the queue accepting submissions on
the CommandService.</p>
</div>
<div class="section" id="daml-commands-input-buffer-length">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_length</span></code><a class="headerlink" href="#daml-commands-input-buffer-length" title="Permalink to this headline">¶</a></h4>
<p>A counter. The number of currently pending submissions on
the CommandService.</p>
</div>
<div class="section" id="daml-commands-input-buffer-delay">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.input_buffer_delay</span></code><a class="headerlink" href="#daml-commands-input-buffer-delay" title="Permalink to this headline">¶</a></h4>
<p>A timer. Measures the queuing delay for pending submissions
on the CommandService.</p>
</div>
<div class="section" id="daml-commands-max-in-flight-capacity">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.max_in_flight_capacity</span></code><a class="headerlink" href="#daml-commands-max-in-flight-capacity" title="Permalink to this headline">¶</a></h4>
<p>A counter. The capacity of the queue tracking completions on
the CommandService.</p>
</div>
<div class="section" id="daml-commands-max-in-flight-length">
<h4><code class="docutils literal notranslate"><span class="pre">daml.commands.max_in_flight_length</span></code><a class="headerlink" href="#daml-commands-max-in-flight-length" title="Permalink to this headline">¶</a></h4>
<p>A counter. The number of currently pending completions on
the CommandService.</p>
</div>
<div class="section" id="daml-execution-get-lf-package">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.get_lf_package</span></code><a class="headerlink" href="#daml-execution-get-lf-package" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time spent by the engine fetching the packages of compiled
Daml code necessary for interpretation.</p>
</div>
<div class="section" id="daml-execution-lookup-active-contract-count-per-execution">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract_count_per_execution</span></code><a class="headerlink" href="#daml-execution-lookup-active-contract-count-per-execution" title="Permalink to this headline">¶</a></h4>
<p>A histogram. Number of active contracts fetched for each processed transaction.</p>
</div>
<div class="section" id="daml-execution-lookup-active-contract-per-execution">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract_per_execution</span></code><a class="headerlink" href="#daml-execution-lookup-active-contract-per-execution" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to fetch all active contracts necessary to process each transaction.</p>
</div>
<div class="section" id="daml-execution-lookup-active-contract">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_active_contract</span></code><a class="headerlink" href="#daml-execution-lookup-active-contract" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to fetch each individual active contract during interpretation.</p>
</div>
<div class="section" id="daml-execution-lookup-contract-key-count-per-execution">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key_count_per_execution</span></code><a class="headerlink" href="#daml-execution-lookup-contract-key-count-per-execution" title="Permalink to this headline">¶</a></h4>
<p>A histogram. Number of contract keys looked up for each processed transaction.</p>
</div>
<div class="section" id="daml-execution-lookup-contract-key-per-execution">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key_per_execution</span></code><a class="headerlink" href="#daml-execution-lookup-contract-key-per-execution" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to lookup all contract keys necessary to process each transaction.</p>
</div>
<div class="section" id="daml-execution-lookup-contract-key">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.lookup_contract_key</span></code><a class="headerlink" href="#daml-execution-lookup-contract-key" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time to lookup each individual contract key during interpretation.</p>
</div>
<div class="section" id="daml-execution-retry">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.retry</span></code><a class="headerlink" href="#daml-execution-retry" title="Permalink to this headline">¶</a></h4>
<p>A meter. Overall number of interpretation retries attempted due to
mismatching ledger effective time.</p>
</div>
<div class="section" id="daml-execution-total">
<h4><code class="docutils literal notranslate"><span class="pre">daml.execution.total</span></code><a class="headerlink" href="#daml-execution-total" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time spent interpreting a valid command into a transaction
ready to be submitted to the ledger for finalization.</p>
</div>
<div class="section" id="daml-index-db-connection-sandbox-pool">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool</span></code><a class="headerlink" href="#daml-index-db-connection-sandbox-pool" title="Permalink to this headline">¶</a></h4>
<p>This namespace holds a number of interesting metrics about the
connection pool used to communicate with the persistent store
that underlies the index.</p>
<p>These metrics include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.Wait</span></code> (timer): time spent waiting to acquire a connection</li>
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.Usage</span></code> (histogram): time spent using each acquired connection</li>
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.TotalConnections</span></code> (gauge): number or total connections</li>
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.IdleConnections</span></code> (gauge): number of idle connections</li>
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.ActiveConnections</span></code> (gauge): number of active connections</li>
<li><code class="docutils literal notranslate"><span class="pre">daml.index.db.connection.sandbox.pool.PendingConnections</span></code> (gauge): number of threads waiting for a connection</li>
</ul>
</div>
<div class="section" id="daml-index-db-deduplicate-command">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.deduplicate_command</span></code><a class="headerlink" href="#daml-index-db-deduplicate-command" title="Permalink to this headline">¶</a></h4>
<p>A timer. Time spent persisting deduplication information to ensure the
continued working of the deduplication mechanism across restarts.</p>
</div>
<div class="section" id="daml-index-db-get-active-contracts">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_active_contracts</span></code><a class="headerlink" href="#daml-index-db-get-active-contracts" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving a page of active contracts to be
served from the active contract service. The page size is
configurable, please look at the CLI reference.</p>
</div>
<div class="section" id="daml-index-db-get-completions">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_completions</span></code><a class="headerlink" href="#daml-index-db-get-completions" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving a page of command completions to be
served from the command completion service. The page size is
configurable, please look at the CLI reference.</p>
</div>
<div class="section" id="daml-index-db-get-flat-transactions">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_flat_transactions</span></code><a class="headerlink" href="#daml-index-db-get-flat-transactions" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving a page of flat transactions to be
streamed from the transaction service. The page size is
configurable, please look at the CLI reference.</p>
</div>
<div class="section" id="daml-index-db-get-ledger-end">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_ledger_end</span></code><a class="headerlink" href="#daml-index-db-get-ledger-end" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving the current ledger end. The count for this metric is expected to
be very high and always increasing as the indexed is queried for the latest updates.</p>
</div>
<div class="section" id="daml-index-db-get-ledger-id">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_ledger_id</span></code><a class="headerlink" href="#daml-index-db-get-ledger-id" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving the ledger identifier.</p>
</div>
<div class="section" id="daml-index-db-get-transaction-trees">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.get_transaction_trees</span></code><a class="headerlink" href="#daml-index-db-get-transaction-trees" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent retrieving a page of flat transactions to be
streamed from the transaction service. The page size is
configurable, please look at the CLI reference.</p>
</div>
<div class="section" id="daml-index-db-load-all-parties">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_all_parties</span></code><a class="headerlink" href="#daml-index-db-load-all-parties" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Load the currently allocated parties so that
they are served via the party management service.</p>
</div>
<div class="section" id="daml-index-db-load-archive">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_archive</span></code><a class="headerlink" href="#daml-index-db-load-archive" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent loading a package of compiled Daml code
so that it’s given to the Daml interpreter when
needed.</p>
</div>
<div class="section" id="daml-index-db-load-configuration-entries">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_configuration_entries</span></code><a class="headerlink" href="#daml-index-db-load-configuration-entries" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to load the current entries in the log of
configuration entries. Used to verify whether a configuration
has been ultimately set.</p>
</div>
<div class="section" id="daml-index-db-load-package-entries">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_package_entries</span></code><a class="headerlink" href="#daml-index-db-load-package-entries" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to load the current entries in the log of
package uploads. Used to verify whether a package
has been ultimately uploaded.</p>
</div>
<div class="section" id="daml-index-db-load-packages">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_packages</span></code><a class="headerlink" href="#daml-index-db-load-packages" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Load the currently uploaded packages so that
they are served via the package management service.</p>
</div>
<div class="section" id="daml-index-db-load-parties">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_parties</span></code><a class="headerlink" href="#daml-index-db-load-parties" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Load the currently allocated parties so that
they are served via the party service.</p>
</div>
<div class="section" id="daml-index-db-load-party-entries">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.load_party_entries</span></code><a class="headerlink" href="#daml-index-db-load-party-entries" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to load the current entries in the log of
party allocations. Used to verify whether a party
has been ultimately allocated.</p>
</div>
<div class="section" id="daml-index-db-lookup-active-contract">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_active_contract</span></code><a class="headerlink" href="#daml-index-db-lookup-active-contract" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to fetch one contract on the index to be used by
the Daml interpreter to evaluate a command into a
transaction.</p>
</div>
<div class="section" id="daml-index-db-lookup-configuration">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_configuration</span></code><a class="headerlink" href="#daml-index-db-lookup-configuration" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to fetch the configuration so that it’s
served via the configuration management service.</p>
</div>
<div class="section" id="daml-index-db-lookup-contract-by-key">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_contract_by_key</span></code><a class="headerlink" href="#daml-index-db-lookup-contract-by-key" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to lookup one contract key on the index to be used by
the Daml interpreter to evaluate a command into a
transaction.</p>
</div>
<div class="section" id="daml-index-db-lookup-flat-transaction-by-id">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_flat_transaction_by_id</span></code><a class="headerlink" href="#daml-index-db-lookup-flat-transaction-by-id" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to lookup a single flat transaction by identifier
to be served by the transaction service.</p>
</div>
<div class="section" id="daml-index-db-lookup-maximum-ledger-time">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_maximum_ledger_time</span></code><a class="headerlink" href="#daml-index-db-lookup-maximum-ledger-time" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent looking up the ledger effective time of a
transaction as the maximum ledger time of all active
contracts involved to ensure causal monotonicity.</p>
</div>
<div class="section" id="daml-index-db-lookup-transaction-tree-by-id">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.lookup_transaction_tree_by_id</span></code><a class="headerlink" href="#daml-index-db-lookup-transaction-tree-by-id" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time to lookup a single transaction tree by identifier
to be served by the transaction service.</p>
</div>
<div class="section" id="daml-index-db-remove-expired-deduplication-data">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.remove_expired_deduplication_data</span></code><a class="headerlink" href="#daml-index-db-remove-expired-deduplication-data" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent removing deduplication information after the expiration
of the deduplication window. Deduplication information is persisted to
ensure the continued working of the deduplication mechanism across restarts.</p>
</div>
<div class="section" id="daml-index-db-stop-deduplicating-command">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.stop_deduplicating_command</span></code><a class="headerlink" href="#daml-index-db-stop-deduplicating-command" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent removing deduplication information after the failure of a
command. Deduplication information is persisted to ensure the continued
working of the deduplication mechanism across restarts.</p>
</div>
<div class="section" id="daml-index-db-store-configuration-entry">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_configuration_entry</span></code><a class="headerlink" href="#daml-index-db-store-configuration-entry" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent persisting a change in the ledger configuration
provided through the configuration management service.</p>
</div>
<div class="section" id="daml-index-db-store-ledger-entry">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_ledger_entry</span></code><a class="headerlink" href="#daml-index-db-store-ledger-entry" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent persisting a transaction that has been
successfully interpreted and is final.</p>
</div>
<div class="section" id="daml-index-db-store-package-entry">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_package_entry</span></code><a class="headerlink" href="#daml-index-db-store-package-entry" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent storing a Daml package uploaded through
the package management service.</p>
</div>
<div class="section" id="daml-index-db-store-party-entry">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_party_entry</span></code><a class="headerlink" href="#daml-index-db-store-party-entry" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent storing party information as part of the
party allocation endpoint provided by the party
management service.</p>
</div>
<div class="section" id="daml-index-db-store-rejection">
<h4><code class="docutils literal notranslate"><span class="pre">daml.index.db.store_rejection</span></code><a class="headerlink" href="#daml-index-db-store-rejection" title="Permalink to this headline">¶</a></h4>
<p>A database metric. Time spent persisting the information that a given
command has been rejected.</p>
</div>
<div class="section" id="daml-lapi">
<h4><code class="docutils literal notranslate"><span class="pre">daml.lapi</span></code><a class="headerlink" href="#daml-lapi" title="Permalink to this headline">¶</a></h4>
<p>Every metrics under this namespace is a timer, one for each
service exposed by the Ledger API, in the format:</p>
<p><code class="docutils literal notranslate"><span class="pre">daml.lapi.service_name.service_endpoint</span></code></p>
<p>As in the following example:</p>
<p><code class="docutils literal notranslate"><span class="pre">daml.lapi.command_service.submit_and_wait</span></code></p>
<p>Single call services return the time to serve the request,
streaming services measure the time to return the first response.</p>
</div>
<div class="section" id="jvm">
<h4><code class="docutils literal notranslate"><span class="pre">jvm</span></code><a class="headerlink" href="#jvm" title="Permalink to this headline">¶</a></h4>
<p>Under the <code class="docutils literal notranslate"><span class="pre">jvm</span></code> namespace there is a collection of metrics that
tracks important measurements about the JVM that the sandbox is
running on, including CPU usage, memory consumption and the
current state of threads.</p>
</div>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../daml/daml-studio.html" class="da-btn da-btn-label btn-prev" title="Daml Studio" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="navigator/index.html" class="da-btn da-btn-label btn-next" title="Navigator" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>