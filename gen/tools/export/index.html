<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ledger Export &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="Daml Integration Kit" href="../../daml-integration-kit/index.html" />
  <link rel="prev" title="Extractor" href="../extractor.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/authorization.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/grpc/index.html">gRPC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/grpc/error-codes.html">Error Codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/ledger-topologies.html">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../extractor.html">Extractor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-integration-kit/index.html">Daml Integration Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ledger-api-test-tool/index.html">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Ledger Export</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#output">Output</a><ul>
<li><a class="reference internal" href="#daml-script">Daml Script</a></li>
<li><a class="reference internal" href="#arguments">Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#executing-the-export">Executing the Export</a></li>
<li><a class="reference internal" href="#ledger-offsets">Ledger Offsets</a></li>
<li><a class="reference internal" href="#unknown-contract-ids">Unknown Contract Ids</a></li>
<li><a class="reference internal" href="#transaction-time">Transaction Time</a></li>
<li><a class="reference internal" href="#caveats">Caveats</a><ul>
<li><a class="reference internal" href="#contracts-created-and-referenced-in-same-transaction">Contracts Created and Referenced in Same Transaction</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="ledger-export">
<h1>Ledger Export<a class="headerlink" href="#ledger-export" title="Permalink to this headline">¶</a></h1>
<p>Export is currently an <a class="reference internal" href="../../support/status-definitions.html"><span class="doc">Early Access Feature in Alpha status</span></a>.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Daml ledger exports read the transaction history or active contract set (ACS)
from the ledger and write it to disk encoded as a
<a class="reference internal" href="../../daml-script/index.html"><span class="doc">Daml Script</span></a> that will reproduce the ledger state
when executed. This can be useful to migrate the history or state of a ledger
from one network to another, or to replicate the ledger state locally for
testing or debugging purposes.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The command to generate a Daml ledger export has the following form.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daml</span> <span class="n">ledger</span> <span class="n">export</span> <span class="o">&lt;</span><span class="nb">format</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Right now Daml script, specified as <code class="docutils literal notranslate"><span class="pre">script</span></code>, is the only supported export
format. You can get an overview of the available command-line options using the
<code class="docutils literal notranslate"><span class="pre">--help</span></code> flag as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daml</span> <span class="n">ledger</span> <span class="n">export</span> <span class="n">script</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>A full example invocation looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daml</span> <span class="n">ledger</span> <span class="n">export</span> <span class="n">script</span> <span class="o">--</span><span class="n">host</span> <span class="n">localhost</span> <span class="o">--</span><span class="n">port</span> <span class="mi">6865</span> <span class="o">--</span><span class="n">party</span> <span class="n">Alice</span> <span class="o">--</span><span class="n">party</span> <span class="n">Bob</span> <span class="o">--</span><span class="n">output</span> <span class="o">../</span><span class="n">out</span> <span class="o">--</span><span class="n">sdk</span><span class="o">-</span><span class="n">version</span> <span class="mf">0.0.0</span>
</pre></div>
</div>
<p>The flags <code class="docutils literal notranslate"><span class="pre">--host</span></code> and <code class="docutils literal notranslate"><span class="pre">--port</span></code> define the Daml ledger to connect to. You
can omit these flags if you are invoking the command from within a Daml project
with a running ledger, e.g. with a running <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">start</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--party</span></code> flags define which contracts will be included in the export. In
the above example only contracts visible to the parties Alice and Bob will be
included in the export. Alternatively, you can set <code class="docutils literal notranslate"><span class="pre">--all-parties</span></code> to export
contracts seen by all known parties. Lack of visibility of certain events may
cause references to <a class="reference internal" href="#export-unknown-cids"><span class="std std-ref">unknown contract ids</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--output</span></code> flag defines the directory prefix under which to generate the
Daml project that contains the Daml script that represents the ledger export.
The flag <code class="docutils literal notranslate"><span class="pre">--sdk-version</span></code> defines which Daml Connect version to configure in
the generated <code class="docutils literal notranslate"><span class="pre">daml.yaml</span></code> configuration file.</p>
<p>By default an export will reproduce all transactions in the ledger history. The
<a class="reference internal" href="#export-ledger-offsets"><span class="std std-ref">ledger offsets</span></a> section describes how to change
this behavior.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<div class="section" id="daml-script">
<h3>Daml Script<a class="headerlink" href="#daml-script" title="Permalink to this headline">¶</a></h3>
<p>The generated Daml code in <code class="docutils literal notranslate"><span class="pre">Export.daml</span></code> contains the following top-level definitions:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">Parties</span></code></dt>
<dd>A mapping from parties in the original ledger state to parties to be used in
the new reconstructed ledger state.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lookupParty</span> <span class="pre">:</span> <span class="pre">Text</span> <span class="pre">-&gt;</span> <span class="pre">Parties</span> <span class="pre">-&gt;</span> <span class="pre">Party</span></code></dt>
<dd>A helper function to look up parties in the <code class="docutils literal notranslate"><span class="pre">Parties</span></code> mapping.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allocateParties</span> <span class="pre">:</span> <span class="pre">Script</span> <span class="pre">Parties</span></code></dt>
<dd>A Daml script that allocates fresh parties on the ledger and returns them in
a <code class="docutils literal notranslate"><span class="pre">Parties</span></code> mapping.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">Contracts</span></code></dt>
<dd>A mapping from unknown contract ids to replacement contract ids,
see <a class="reference internal" href="#export-unknown-cids"><span class="std std-ref">unknown contract ids</span></a>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lookupContract</span> <span class="pre">:</span> <span class="pre">Text</span> <span class="pre">-&gt;</span> <span class="pre">Contracts</span> <span class="pre">-&gt;</span> <span class="pre">ContractId</span> <span class="pre">a</span></code></dt>
<dd>A helper function to look up unknown contract ids in the <code class="docutils literal notranslate"><span class="pre">Contracts</span></code> mapping.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">Args</span></code></dt>
<dd>A record that holds all arguments to the export script.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">:</span> <span class="pre">Args</span> <span class="pre">-&gt;</span> <span class="pre">Script</span> <span class="pre">()</span></code></dt>
<dd>The Daml ledger export encoded as a Daml script. Given the relevant arguments
this script will reproduce the ledger state when executed. You can read this
script to understand the exported ledger state or history, and you can modify
this script for debugging or testing purposes.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">testExport</span> <span class="pre">:</span> <span class="pre">Script</span> <span class="pre">()</span></code></dt>
<dd>A Daml script that will first invoke <code class="docutils literal notranslate"><span class="pre">allocateParties</span></code> and then <code class="docutils literal notranslate"><span class="pre">export</span></code>.
It will use an empty <code class="docutils literal notranslate"><span class="pre">Contracts</span></code> mapping. This can be useful to test the
export in Daml studio. If your export references unknown contract ids then
you may need to manually extend the <code class="docutils literal notranslate"><span class="pre">Contracts</span></code> mapping.</dd>
</dl>
<p>In most simple cases the generated Daml script will use the functions
<code class="docutils literal notranslate"><span class="pre">submit</span></code> or <code class="docutils literal notranslate"><span class="pre">submitMulti</span></code> to issue ledger commands that reproduce a
transaction or ACS. In some cases the generated Daml script
will fall back to the more general functions <code class="docutils literal notranslate"><span class="pre">submitTree</span></code> or
<code class="docutils literal notranslate"><span class="pre">submitTreeMulti</span></code>.</p>
<p>For example, the following generated code issues a create-and-exercise command
that creates an instance of <code class="docutils literal notranslate"><span class="pre">ContractA</span></code> and exercises the choice <code class="docutils literal notranslate"><span class="pre">ChoiceA</span></code>.
The function <code class="docutils literal notranslate"><span class="pre">submitTree</span></code> returns a <code class="docutils literal notranslate"><span class="pre">TransactionTree</span></code> object that captures
all contracts that are created in the transaction. The <code class="docutils literal notranslate"><span class="pre">fromTree</span></code> function is
then used to extract the contract ids of the <code class="docutils literal notranslate"><span class="pre">ContractB</span></code> contracts that were
created by <code class="docutils literal notranslate"><span class="pre">ChoiceA</span></code>.</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">tree</span> <span class="ow">&lt;-</span> <span class="n">submitTree</span> <span class="n">alice_0</span> <span class="kr">do</span>
  <span class="n">createAndExerciseCmd</span>
    <span class="kt">Main</span><span class="o">.</span><span class="kt">ContractA</span> <span class="kr">with</span>
      <span class="n">owner</span> <span class="ow">=</span> <span class="n">alice_0</span>
    <span class="kt">Main</span><span class="o">.</span><span class="kt">ChoiceA</span>
<span class="kr">let</span> <span class="n">contractB_1_1</span> <span class="ow">=</span> <span class="n">fromTree</span> <span class="n">tree</span> <span class="o">$</span>
      <span class="n">exercised</span> <span class="o">@</span><span class="kt">Main</span><span class="o">.</span><span class="kt">ContractA</span> <span class="s">&quot;ChoiceA&quot;</span> <span class="o">$</span>
      <span class="n">created</span> <span class="o">@</span><span class="kt">Main</span><span class="o">.</span><span class="kt">ContractB</span>
<span class="kr">let</span> <span class="n">contractB_1_2</span> <span class="ow">=</span> <span class="n">fromTree</span> <span class="n">tree</span> <span class="o">$</span>
      <span class="n">exercised</span> <span class="o">@</span><span class="kt">Main</span><span class="o">.</span><span class="kt">ContractA</span> <span class="s">&quot;ChoiceA&quot;</span> <span class="o">$</span>
      <span class="n">createdN</span> <span class="o">@</span><span class="kt">Main</span><span class="o">.</span><span class="kt">ContractB</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="arguments">
<h3>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h3>
<p>Daml export will generate a default arguments file in <code class="docutils literal notranslate"><span class="pre">args.json</span></code>, which
configures the export to use the same party names as in the original ledger
state and to map unknown contract ids to themselves. For example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;contracts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;001335..&quot;</span><span class="p">:</span> <span class="s2">&quot;001335...&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;parties&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;Alice&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Bob&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="executing-the-export">
<h2>Executing the Export<a class="headerlink" href="#executing-the-export" title="Permalink to this headline">¶</a></h2>
<p>The generated Daml project is configured such that <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">start</span></code> will execute
the Daml export with the default arguments defined in <code class="docutils literal notranslate"><span class="pre">args.json</span></code>.
Alternatively you can build and execute the generated Daml script manually
using commands of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daml</span> <span class="n">build</span>
<span class="n">daml</span> <span class="n">script</span> <span class="o">--</span><span class="n">ledger</span><span class="o">-</span><span class="n">host</span> <span class="n">localhost</span> <span class="o">--</span><span class="n">ledger</span><span class="o">-</span><span class="n">port</span> <span class="mi">6865</span> <span class="o">--</span><span class="n">dar</span> <span class="o">.</span><span class="n">daml</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">export</span><span class="o">-</span><span class="mf">1.0.0</span><span class="o">.</span><span class="n">dar</span> <span class="o">--</span><span class="n">script</span><span class="o">-</span><span class="n">name</span> <span class="n">Export</span><span class="p">:</span><span class="n">export</span> <span class="o">--</span><span class="nb">input</span><span class="o">-</span><span class="n">file</span> <span class="n">args</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">--ledger-host</span></code> and <code class="docutils literal notranslate"><span class="pre">--ledger-port</span></code> configure the address of
the ledger and the argument <code class="docutils literal notranslate"><span class="pre">--input-file</span></code> points to a JSON file that defines
the export script’s arguments.</p>
</div>
<div class="section" id="ledger-offsets">
<span id="export-ledger-offsets"></span><h2>Ledger Offsets<a class="headerlink" href="#ledger-offsets" title="Permalink to this headline">¶</a></h2>
<p>By default <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">ledger</span> <span class="pre">export</span></code> will reproduce all transactions, as seen by
the selected parties, from the beginning of the ledger history to the current
end. The command-line flags <code class="docutils literal notranslate"><span class="pre">--start</span></code> and <code class="docutils literal notranslate"><span class="pre">-end</span></code> can be used to change this
behavior. Both flags accept ledger offsets, either the special offsets
<code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code>, or an arbitrary ledger offset.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--start</span></code></dt>
<dd>Transactions up to and including the start offset will be reproduced as a
sequence of create commands that reproduce the ACS as of the start offset.
Later transactions will be reproduced as seen by the configured parties. In
particular, <code class="docutils literal notranslate"><span class="pre">--start</span> <span class="pre">end</span></code> will reproduce the current ACS but no transaction
history, <code class="docutils literal notranslate"><span class="pre">--start</span> <span class="pre">start</span></code> (the default) will reproduce the history of all
transactions as seen by the configured parties.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--end</span></code></dt>
<dd>Export transactions up to and including this end offset.</dd>
</dl>
</div>
<div class="section" id="unknown-contract-ids">
<span id="export-unknown-cids"></span><h2>Unknown Contract Ids<a class="headerlink" href="#unknown-contract-ids" title="Permalink to this headline">¶</a></h2>
<p>Daml ledger export may encounter references to unknown contracts. This may occur
if a contract was divulged to one of the configured parties, but the event that
initially created that contract is not visible to any of the configured
parties. This may also occur if a contract was archived before the configured
start offset, such that it is neither part of the recreated ACS nor created in
any of the exported transactions, and another live contract retains a reference
to this archived contract.</p>
<p>In such cases Daml export will not generate commands to recreate these unknown
contracts. Instead, it will generate a lookup in the <code class="docutils literal notranslate"><span class="pre">Contracts</span></code> mapping
defined in the scripts arguments. You can define a mapping from unknown
contract ids to replacement contract ids in the JSON input file. The default
<code class="docutils literal notranslate"><span class="pre">args.json</span></code> generated by Daml ledger export will map unknown contract ids to
themselves.</p>
<p>Note that you may submit references to non-existing contract ids to the ledger
using this feature. A <code class="docutils literal notranslate"><span class="pre">fetch</span></code> on such a dangling contract id will fail.</p>
</div>
<div class="section" id="transaction-time">
<h2>Transaction Time<a class="headerlink" href="#transaction-time" title="Permalink to this headline">¶</a></h2>
<p>Daml ledger exports may fail to reproduce the ledger state or transaction
history if contracts are sensitive to ledger time. You can enable the
<code class="docutils literal notranslate"><span class="pre">--set-time</span></code> option to issue <code class="docutils literal notranslate"><span class="pre">setTime</span></code> commands in the generated Daml
script. However, this is not supported by all ledgers.</p>
</div>
<div class="section" id="caveats">
<span id="export-caveats"></span><h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<div class="section" id="contracts-created-and-referenced-in-same-transaction">
<h3>Contracts Created and Referenced in Same Transaction<a class="headerlink" href="#contracts-created-and-referenced-in-same-transaction" title="Permalink to this headline">¶</a></h3>
<p>Daml ledger export may fail in certain cases when it attempts to reproduce a
transaction that creates a contract and then references that contract within
the same transaction.</p>
<p>The Daml ledger API allows only a few ways in which a contract that was created
in a set of commands can be referenced within the same set of commands. Namely,
create-and-exercise and exercise-by-key. Choice implementations, on the other
hand, are not restricted in this way.</p>
<p>If the configured parties only see part of a given transaction tree, then
events that were originally emitted by a choice may be lifted to the root of
the transaction tree. This could produce a transaction tree that cannot be
replicated using the ledger API. In such cases Daml ledger export will fail.</p>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extractor.html" class="da-btn da-btn-label btn-prev" title="Extractor" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="../../daml-integration-kit/index.html" class="da-btn da-btn-label btn-next" title="Daml Integration Kit" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>